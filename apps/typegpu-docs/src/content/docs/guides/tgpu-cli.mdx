---
title: TypeGPU CLI
description: A guide on how to use the TypeGPU CLI
---

import { FileTree } from '@astrojs/starlight/components';
import FileDiff from '../../../components/FileDiff.astro';

TypeGPU CLI (tgpu-cli) is a command-line interface for the TypeGPU library.
It allows you to generate TypeGPU definitions from WGSL shaders.

## Installation

Using npm:

```bash
npm install -g tgpu-cli
```

## Feature overview

- Generate TypeGPU definitions from WGSL shaders
- Continuously watch for changes in WGSL files and update the generated definitions
- Specify input and output using glob patterns
- Choose the output extension and CommonJS or ES module format

## Usage

This section will cover the most common use cases of the TypeGPU CLI and provide short examples.

### Generate TypeGPU definitions for WGSL shader files

To generate TypeGPU definitions from a single WGSL shader file, run:

```bash
tgpu-cli gen path/to/shader.wgsl
```

This will generate a TypeScript file with the TypeGPU definitions in the same directory as the shader.
By default, the generated file will have the same name as the shader, with the `.ts` extension.

<div class="relative">
<FileTree>
  - path/to
      - shader.wgsl
      - <FileDiff> shader.ts </FileDiff>
</FileTree>
</div>

:::note
Another valid way to run the command is by using quotes:
```bash
tgpu-cli gen "path/to/shader.wgsl"
# or
tgpu-cli gen 'path/to/shader.wgsl'
```
The quotes are not necessary if the path does not contain spaces. However, using them is a good practice to avoid potential issues.
:::

TypeGPU CLI supports glob patterns for specifying input paths.
The following command will generate TypeGPU definitions for all WGSL files inside a given directory:

```bash
tgpu-cli gen "path/to/*.wgsl"
```

The generated TypeScript files will have the same names as the shaders, with the `.ts` extension.
To specify a recursive search, use the `**` pattern:

```bash
tgpu-cli gen "path/to/**/*.wgsl"
```

This will generate TypeGPU definitions for all WGSL files inside the `path/to` directory and its subdirectories.

:::tip
You can also explicitly specify the input argument using the `--input` (or `-i`) option:

```bash
tgpu-cli gen --input "path/to/shader.wgsl"
```
:::


### Specify the output path with the `--output` option

By default, the generated TypeScript files are placed in the same directory as the input shaders.
You can specify a different output path using the `--output` option:

```bash
tgpu-cli gen "path/to/shader.wgsl" --output "different/path/output.ts"
```

This will generate the TypeGPU definitions in the `different/path` directory with the `output.ts` filename.
It also supports glob patterns for specifying the output path:

```bash
tgpu-cli gen "path/to/*.wgsl" --output "output/*.ts"
```

This will generate the TypeGPU definitions in the `output` directory with the same names as the shaders, but with the `.ts` extension.

:::caution
If you use a glob pattern for the input path, specifically `**`, make sure to use the `**` pattern
in the output path as well to preserve the directory structure (*or make sure no conflicts will happen*).
If you don't, all generated files will be placed in the same directory which may lead to name conflicts.

<FileTree>

- src
  - example
    - shader1.wgsl
  - shader1.wgsl
  - shader2.wgsl

</FileTree>

If you run:

```bash
tgpu-cli gen "src/**/*.wgsl" --output "output/*.ts"
```

The script will fail because all generated files will be placed in the `output` directory, and there will
be a name conflict as both `shader1.wgsl` and `example/shader1.wgsl` will try to generate `output/shader1.ts`.
:::

You can also use the `-o` shorthand for the `--output` option:

```bash
tgpu-cli gen "path/to/shader.wgsl" -o "different/path/output.ts"
```

### Supported extensions and module formats

By default, the generated TypeScript files use the `.ts` extension and the ES module format.
You can specify a different extension by just providing the extension in the output path:

```bash
tgpu-cli gen "path/to/shader.wgsl" -o "different/path/output.js"
```

This will generate the TypeGPU definitions in the `different/path` directory with the `output.js` filename.
The supported extensions are:

import ListItem from '../../../components/ListItem.astro';

<ListItem idx={'1'}>
  .js
</ListItem>
<ListItem idx={2}>
  .cjs
</ListItem>
<ListItem idx={3}>
  .mjs
</ListItem>
<ListItem idx={4}>
  .ts
</ListItem>
<ListItem idx={5}>
  .cts
</ListItem>
<ListItem idx={6}>
  .mts
</ListItem>

You can also specify the module format using the `--commonjs` option:

```bash
tgpu-cli gen "path/to/shader.wgsl" --output "different/path/output.js" --commonjs
```

### Using the `--keep` and `--overwrite` options

When generating TypeGPU definitions, if the output file already exists, the script will fail and not overwrite the existing file.
You can use the `--keep` option to skip the generation of the file if it already exists:

```bash
tgpu-cli gen "path/to/*.wgsl" --output "output/*.ts" --keep
```

This will skip the generation of the TypeGPU definitions for shaders that already have a corresponding TypeScript file in the output directory.

If you want to overwrite the existing files, you can use the `--overwrite` option:

```bash
tgpu-cli gen "path/to/*.wgsl" --output "output/*.ts" --overwrite
```

This will overwrite the existing TypeScript files with the new TypeGPU definitions.

### Watch mode

TypeGPU CLI supports a watch mode that continuously monitors the input files for changes and updates the generated definitions.
To enable the watch mode, use the `--watch` (or `-w`) option:

```bash
tgpu-cli gen "path/to/*.wgsl" --output "output/*.ts" --watch
```

This will generate the TypeGPU definitions for all WGSL files inside the `path/to` directory
and its subdirectories and continuously monitor them for changes.
By default, the watch mode will overwrite the existing files when changes are detected after the initial generation.
You can also use the `--keep` and `--overwrite` options in the watch mode. They will only affect the initial generation.


## Getting help with the CLI

To get a quick overview of the available commands, run:

```bash
tgpu-cli --help
```

This will display a list of available commands and options.
To get more detailed information about a specific command, run:

```bash
tgpu-cli <command> --help
```

You can also use the `-h` shorthand for the `--help` option.

## Example

To generate TypeGPU definitions from a WGSL shader, run:

```bash
tgpu-cli gen path/to/shader.wgsl
```

This will generate a TypeScript file with the TypeGPU definitions in the same directory as the shader.
By default, the generated file will have the same name as the shader, with the `.ts` extension.

You can also specify the input and output using glob patterns:

```bash
tgpu-cli gen "path/to/**/*.wgsl" -o **/*.ts
```

To find out more about the `gen` command, run:

```bash
tgpu-cli gen --help
```It allows you to generate TypeGPU definitions from WGSL shaders.
