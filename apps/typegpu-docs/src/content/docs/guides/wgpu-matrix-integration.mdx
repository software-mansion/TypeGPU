---
title: Using TypeGPU with `wgpu-matrix`
description: A guide on how to use TypeGPU with `wgpu-matrix`.
draft: true
---

The [wgpu-matrix](https://github.com/greggman/wgpu-matrix) library is a popular tool for WebGPU developers to work with matrices.
It is designed from the ground up to be compatible with WebGPU, and it provides a lot of useful features.

From `wgpu-matrix` version `3.3.0` and `typegpu` version `0.2.0`, it is possible to use TypeGPU primitives inside the `wgpu-matrix` library.

## Using `wgpu-matrix` functions with TypeGPU primitives

Most `wgpu-matrix` functions are designed to accept `BaseArgType` as input arguments. They are defined as follows:

```ts
type BaseArgType = Float32Array | Float64Array | MutableNumberArray
```

where `MutableNumberArray` is defined as:

```ts
interface MutableNumberArray {
	readonly length: number;
	[n: number]: number;
}
```

And since TypeGPU's vector and matrix implement this interface, you can use them directly with `wgpu-matrix` functions.
For example, you can create a vector and normalize it using like this:

```ts
import { vec2f } from 'typegpu/data';
import { vec2 } from 'wgpu-matrix';

const v = vec2f(1, 2);
vec2.normalize(v, v);
console.log(v.x); // 0.447..
console.log(v.y); // 0.894..
```

:::note
Since we want to modify the vector in-place, we pass the same vector as both input and dst arguments.
If we didn't we would get a `Float32Array` without modifying the original vector.
:::

If you wanted to initialize a matrix as an identity matrix, you could do it like this:

```ts
import { mat4x4f } from 'typegpu/data';
import { mat4 } from 'wgpu-matrix';

const m = mat4.identity(mat4x4f()); // returns a mat4x4f

console.log(m[0]); // 1
```
